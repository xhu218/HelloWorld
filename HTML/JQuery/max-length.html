<!--<script src="jquery-1.11.3.js"></script>-->
<script type="text/javascript">
    function ismaxlength(obj) {

        var mlength = obj.getAttribute ? parseInt(obj.getAttribute("maxlength")) : ""
        document.getElementById('span1').value = obj.value.length;
        var temp = obj.value.replace("\n", "ab").replace("\r\n", "ab").replace("\r", "ab");
        if (temp.length >= 10) return false;
        document.getElementById('span2').value = temp.length;
        if (obj.getAttribute && obj.value.length > mlength)
            obj.value = obj.value.substring(0, mlength)
    }

</script>
<textarea maxlength="10" style="width:300px;height:300px" onkeyup="return ismaxlength(this)">121231231231231321231234</textarea>
<br /> 目前计算长度方式：
<input id="span1"></input>
<br /> 改进后计算长度方式：
<input id="span2"></input>